<!DOCTYPE html> <!--defining the document type, the code is characteristic to html-->
<html lang="en"> <!--the language of the content on the website-->
<head> <!--the heading-->

    <meta charset="UTF-8"> <!--UTF-8 makes other funky symbols accessible that are not typical in the english alphabet-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--scale and display of the webpage-->
    <!--viewport stands for the visible area of the webpage -->
    <title> Brain Parts Illustration with Wikidata </title> <!--title of the page that seen in the browser tab and search engine results-->
    
    <style> /*switching to CSS with <style> tag which is used to design the content of a HTML webpage*/

        body { /*the color of the website*/
            background-color: rgb(254, 254, 254);
            margin: 0;
            font-family: Arial, sans-serif;
        }

        #header {
            background-image: url('images/backroundimagefinal.svg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            text-align: center;
            padding: 50px 0; /* Adds padding around the header */
            color: white; /* Make the text white for contrast */
            height: 150px;
            box-sizing: border-box;
        }

        #maintext { /*descriptive text*/
            margin: 0;
            padding-left: 250px;
            font-family: Arial, sans-serif;
        }

        /* Style for the container with content */
        .container {
            width: 80%; /* 80% of the page width */
            max-width: 1200px; /* Set a max width for large screens */
            margin: 0 auto; /* Center the container horizontally */
            background-color: rgb(242, 250, 252); /* White background for content */
            padding: 20px; /* Add padding around content */
            border-radius: 0px; /* rounded corners */
        }

        /*styling the box for the list of brain parts*/
        #styleBox { /* # is an id selector, the style described below applies only to that*/
            position: fixed;
            bottom: 10px; /*the box will be 10px from the bottom of the page*/
            left: 10px;
            width: 200px;
            padding: 10px; /*padding creates space between the border and the content*/
            background-color: lightblue;
            border: 2px solid black;
            border-radius: 5px;
        }

        /*styling the heading of the box of the list, h1 is the biggest in size and h6 the smallest*/
        #styleBox h3 {
            margin: 0 0 10px 0;
            text-align: center;
            font-size: 16px;
        }
        /*styling the buttons inside the box*/
        #styleBox button { /*CSS is (lower-higher)case-sensitive, check that the id is always written correctly*/
            display: block;
            width: 100%;
            margin: 5px 0;
            padding: 5px;
            border: 1px solid black;
            border-radius: 3px;
            background-color: white;
            cursor: pointer;
        }

        /*when the mouse hovers over the button then the color of the button changes slightly*/
        #styleBox button:hover {
            background-color: #fff954;
        }

        #functionBox {
            position: fixed; /* Changed from absolute to fixed */
            bottom: 30px; /* Distance from the bottom of the viewport */
            right: 30px; /* Distance from the right of the viewport */
            width: 200px;
            padding: 10px;
            background-color: rgb(144, 197, 238);
            border: 2px solid black;
            border-radius: 5px;
            display: none; /* Initially hidden */
            z-index: 1000; /* Ensures it stays on top of other elements */
        }

        #closeButton {
            position: absolute; /* Position within the parent (functionBox) */
            top: 5px; /* Distance from the top of functionBox */
            right: 5px; /* Distance from the right of functionBox */
            background-color: rgb(249, 0, 0);
            color: white;
            border: 1px solid black;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            text-align: center;
            font-size: 12px;
            line-height: 20px;
            padding: 0;
            }


        #closeButton:hover {
            background-color: darkred;
        }

        #functionBox h3 {
            margin: 0;
            text-align: center;
            font-size: 16px;
        }

        /*adding the initial SVG image of the brain onto the website*/
        #imageBrain {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh; /*vh stands for viewport height and it makes sure the image is centered vertically*/
            width: 100%;
        }

        #imageBrain img {
            max-width: 100%;  /*adjusts the image size within the available space*/
            max-height: 80%; /*limits the height of the image*/
        }

    </style>
</head> <!--the head section is meant for metadata, links to CSS, and JavaScript imports-->

<body> <!--the body section is meant for content display-->
    
    <!--h1 stands for the main heading on the page itself-->
    <div id="header">
        <h1 style="text-decoration: underline; text-align: center; margin-top: 0;"> Brain Anatomy and The Functional Specialization of its Brain Regions </h1>
    </div>

    <div id="maintext" class="container">
        <!--p stands for paragraph-->
        <p style="text-align: center;">
        This website illustrates human brain anatomy and the functional specialization of its regions to support biomedical research and educational applications.
        Interactivity can effectively illustrate complex brain functions like memory, movement, and sensory processing.
        This visualization design hopefully improves user engagement and knowledge retention.
        Click on any part on the image or in the list on the left side to see detailed information fetched from Wikidata.
        The image is from this site made by that person (to be updated). </p>

        <!--placing brain image onto the website-->
        <div id="imageBrain">
            <img src="images/file brain 2024-11-15 at 11.13.10.svg" width="700" height="500">
        </div>
    </div>

    <!--assinging variable "styleBox" for the list of brain parts-->
    <div id="styleBox"></div> <!--div is a section/group/division for elements-->

    <!--assinging variable "functionBox" for the function descriptions-->
    <div id="functionBox">
        <button id="closeButton">x</button>
        <h3>Function</h3>
        <p id="functionDescription"> Click on a brain part to see its function. </p>
    </div>

    <script>
        // Array of brain parts with Wikidata IDs
        const wikidataItems = {
            'Cerebral Cortex': [
                { id: 'Q749520' }, // Frontal Lobe
                { id: 'Q848340' }, // Occipital Lobe
                { id: 'Q815334' }, // Parietal Lobe
                { id: 'Q744385' }, // Temporal Lobe
                { id: 'Q728285' }, // Broca's area
            ],
            'Limbic System': [
                { id: 'Q11345481' }, // Limbic Lobe
                { id: 'Q338924' }, // Amygdala
                { id: 'Q48360' }, // Hippocampus
                { id: 'Q184215' }, // Thalamus
                { id: 'Q164386' }, // Hypothalamus
                { id: 'Q156871' }, // Pituitary Gland
            ],
            'Brain Stem': [
                { id: 'Q189033' }, // Medulla Oblongata
                { id: 'Q185080' }, // Mesencephalon/Midbrain
                { id: 'Q192570' }, // Pons
            ],
            'Other Areas': [
                { id: 'Q130983' }, // Cerebellum
            ],
        };
    
        // Function to fetch labels from Wikidata
        async function fetchLabel(id) {
            const url = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${id}&format=json&props=labels&languages=en&origin=*`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                return data.entities[id]?.labels.en?.value || 'Unknown';
            } catch (error) {
                console.error(`Error fetching label for ${id}:`, error);
                return 'Unknown';
            }
        }
    
        // Function to fetch description from Wikidata
        async function fetchDescription(id) {
            const url = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${id}&format=json&props=descriptions&languages=en&origin=*`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                return data.entities[id]?.descriptions.en?.value || 'No description available';
            } catch (error) {
                console.error(`Error fetching description for ${id}:`, error);
                return 'No description available';
            }
        }
    
        // Populate buttons in the styleBox
        async function populateButtons() {
            const styleBox = document.getElementById('styleBox'); // Use existing styleBox
    
            for (const category in wikidataItems) {
                // Create and append a heading for each category
                const categoryHeading = document.createElement('h4');
                categoryHeading.textContent = category;
                styleBox.appendChild(categoryHeading);
    
                //Ierate over each item in the current category
                for (const item of wikidataItems[category]) {
                    const label = await fetchLabel(item.id);
    
                    // Create and style a button for each brain part
                    const button = document.createElement('button');
                    button.textContent = label;
    
                    // Add click event listener to show the functionBox
                    button.addEventListener('click', async () => {
                        const functionBox = document.getElementById('functionBox'); //additional new line
                        const functionDescription = document.getElementById('functionDescription'); //additional new line
    
                        const description = await fetchDescription(item.id);
                        functionDescription.textContent = `${label}: ${description}`;
                        functionBox.style.display = 'block'; // Show the functionBox
                    });
    
                    styleBox.appendChild(button);
                }
            }
        }
    
        // Add functionality to the close button
        document.getElementById('closeButton').addEventListener('click', () => {
            const functionBox = document.getElementById('functionBox');
            functionBox.style.display = 'none'; // Hide the functionBox
        });
    
        // Populate the buttons when the page loads
        populateButtons();
    </script>    

</body>
</html>
