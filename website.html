<!DOCTYPE html> <!--defining the document type, the code is characteristic to html--> 
<html lang="en"> <!-- starts the HTML doc and sets the language of the content on the website-->

<head> <!--start the heading-->

    <meta charset="UTF-8"> <!--UTF-8 makes other funky symbols accessible that are not typical in the english alphabet-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--scale and display of the webpage, so visual part of the website-->
        <!--viewport stands for the visible area of the webpage, to make sure the mage display is correct in different services -->
    <title>Brain Parts Illustration with Wikidata</title> <!--title of the page that seen in the browser tab and search engine results-->
    
    <link rel="stylesheet" href="style.css"> <!--the design layout, with the link to the external css file-->

</head>

<body> <!--the body section is meant for content display-->

    <!--h1 stands for the main heading on the page itself-->
    <header id="header">  <!-- div div is a section/group/division for elements - it's the structural building block, it groups and organizes the content by divinding them and it makes it easier to manipulate them all together -->
        <h1 style="text-align: center; margin-top: 0; font-family: 'Georgia', sans-serif; font-weight: 700; font-size: 3em; letter-spacing: 5px; text-shadow: 3px 3px 6px rgb(198, 198, 196);"> <!-- h1 is for the main heading and the style is linking to the external css file to to have a tyled title -->
            BRAIN ANATOMY AND PHYSIOLOGY
        </h1>
    </header>

    <!--p stands for paragraph-->
    <main id="main-content" class="container">
        <section id="introduction">
            <p style="text-align: center;">
                This website illustrates human brain anatomy and the functional specialization of its regions to support biomedical research and educational applications.
            Interactivity can effectively illustrate complex brain functions like memory, movement, and sensory processing.
            This visualization design aims to improve user engagement and knowledge retention.
            Click on any brain part listed on the box to find out more.
            </p>
        </section>

        <section id="brain-visualization" style="text-align: center;">
            <div id="image-container" style="position: relative; display: inline-block;">
                <img id="brainImage" src="images/file brain 2024-11-15 at 11.13.10.svg" 
                     alt="Brain Anatomy" width="700" height="500" style="display: block; margin: auto;"> <!-- putting the central neurons background -->
                <div id="overlayContainer" style="position: absolute; top: 0; left: 0; width: 700px; height: 500px; pointer-events: none;"></div>
            </div>
        </section>

        <section id="interaction-panel"> <!--assinging variable "styleBox" for the list of brain parts-->
            <div id="styleBox">
                <h3 style="margin-top: 5; text-shadow: 2px 2px 5px rgba(211, 211, 211, 0.588); text-align: center;">Select a Brain Part</h3>
            </div> <!-- holds the buttons for the brain parts -->
            
            <!--assinging variable "functionBox" for the function descriptions-->
            <div id="functionBox" style="display: none;"> <!-- makes the functions box with the deatils appear together with the image -->
                <button id="closeButton" aria-label="Close function box">x</button> <!-- the close button makes the function box and the brain image related to it vanish -->
                <h3>Function</h3>
                <p id="functionDescription">Click on a brain part to see its function.</p>
                <p id="wikiLink" style="margin-top: 10px;"></p>
            </div>
        </section>
    </main>

    <footer id="footerBar" style="text-align: center; margin-top: 20px;">
        <p>
            Â© <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener">CC BY 4.0 License</a>. 
            Images used on this site are sourced from <a href="https://stock.adobe.com/" target="_blank" rel="noopener">Adobe Stock</a>.
        </p>
    </footer>

    <script>
        const sparqlEndpoint = 'https://query.wikidata.org/sparql';

        const sparqlQuery = `
            SELECT ?BrainPart ?BrainPartLabel ?BrainPartDescription ?WikipediaArticle
            WHERE {
                VALUES ?BrainPart {
                    wd:Q815334  # Parietal lobe
                    wd:Q744385  # Temporal lobe
                    wd:Q848340  # Occipital lobe
                    wd:Q749520  # Frontal lobe
                    wd:Q338924  # Amygdala
                    wd:Q130983  # Cerebellum
                    wd:Q11345481  # Limbic lobe
                    wd:Q184215  # Thalamus
                    wd:Q164386  # Hypothalamus
                    wd:Q192570  # Pons
                    wd:Q48360   # Hippocampus
                    wd:Q728285  # Broca's area
                    wd:Q156871  # Pituitary gland
                }

                ?BrainPart schema:description ?BrainPartDescription.
                OPTIONAL { ?WikipediaArticle schema:about ?BrainPart; schema:isPartOf <https://en.wikipedia.org/>. }
                FILTER (LANG(?BrainPartDescription) = "en")

                SERVICE wikibase:label { 
                    bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".
                }
            }
        `;

        const imageMap = {
            'Q749520': 'images/Frontal lobe.svg',
            'Q848340': 'images/Occipital lobe.svg',
            'Q815334': 'images/Parietal lobe final.svg',
            'Q744385': 'images/Temporal Lobe.svg',
            'Q728285': 'images/Brocas area.svg',
            'Q11345481': 'images/Limbic lobe.svg',
            'Q338924': 'images/Amygdala.svg',
            'Q48360': 'images/Hippocampus.svg',
            'Q184215': 'images/thalamus.svg',
            'Q164386': 'images/hypothalamus.svg',
            'Q156871': 'images/pituitary gland.svg',
            'Q189033': 'images/medulla oblongata.svg',
            'Q185080': 'images/midbrain(mesencephalon).svg',
            'Q192570': 'images/Pons (1).svg',
            'Q130983': 'images/Cerebellum.svg',
        };

        async function fetchBrainPartsData() {
            const url = `${sparqlEndpoint}?query=${encodeURIComponent(sparqlQuery)}`;
            try {
                const response = await fetch(url, {
                    headers: {
                        'Accept': 'application/sparql-results+json',
                    },
                });

                if (!response.ok) {
                    throw new Error(`SPARQL query failed with status: ${response.status}`);
                }

                const data = await response.json();
                return data.results.bindings.map((binding) => ({
                    id: binding.BrainPart.value.split('/').pop(),
                    label: binding.BrainPartLabel.value,
                    description: binding.BrainPartDescription.value,
                    wikipedia: binding.WikipediaArticle ? binding.WikipediaArticle.value : null,
                }));
            } catch (error) {
                console.error('Error fetching data from SPARQL endpoint:', error);
                return [];
            }
        }

        async function populateButtons() {
            const styleBox = document.getElementById('styleBox');
            const brainPartsData = await fetchBrainPartsData();

            brainPartsData.forEach((part) => {
                const button = document.createElement('button');
                button.textContent = part.label;
                button.setAttribute('aria-label', `View information about ${part.label}`);

                button.addEventListener('click', () => {
                    const functionBox = document.getElementById('functionBox');
                    const functionDescription = document.getElementById('functionDescription');
                    const wikiLink = document.getElementById('wikiLink');

                    functionDescription.textContent = `${part.label}: ${part.description}`;
                    if (part.wikipedia) {
                        wikiLink.innerHTML = `Learn more on <a href="${part.wikipedia}" target="_blank" rel="noopener">Wikipedia</a>`;
                    } else {
                        wikiLink.textContent = "Wikipedia article not available.";
                    }

                    functionBox.style.display = 'block';

                    const brainImage = document.getElementById('brainImage');
                    const newImagePath = imageMap[part.id];
                    if (newImagePath) {
                        brainImage.src = newImagePath;
                    } else {
                        console.warn(`No image mapped for ID: ${part.id}`);
                    }
                });

                styleBox.appendChild(button);
            });
        }

        document.getElementById('closeButton').addEventListener('click', () => {
            const functionBox = document.getElementById('functionBox');
            functionBox.style.display = 'none';

            const brainImage = document.getElementById('brainImage');
            brainImage.src = 'images/file brain 2024-11-15 at 11.13.10.svg';
        });

        populateButtons();
    </script>
</body>

</html>
