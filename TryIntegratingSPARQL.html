<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Parts Illustration with Wikidata</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sparqljs@3.5.0/browser/sparql.min.js"></script>
</head>
<body>
    <div id="header">
        <h1 style="text-align: center; margin-top: 0; font-family: 'Georgia', sans-serif; font-weight: 700; font-size: 4em; letter-spacing: 5px; text-shadow: 2px 2px 5px rgba(163, 167, 200, 0.588);">
            BRAIN ANATOMY AND PHYSIOLOGY
        </h1>
    </div>

    <div id="maintext" class="container">
        <p style="text-align: center;">
            This website illustrates human brain anatomy and the functional specialization of its regions to support biomedical research and educational applications.
            Interactivity can effectively illustrate complex brain functions like memory, movement, and sensory processing.
            This visualization design hopefully improves user engagement and knowledge retention.
            Click on any part on the image or in the list on the left side to see detailed information fetched from Wikidata.
        </p>

        <div id="imageBrain" style="position: relative;">
            <img id="brainImage" src="images/file brain 2024-11-15 at 11.13.10.svg" 
                 width="700" height="500" style="display: block; margin: auto;">
        </div>
    </div>

    <div id="styleBox"></div>

    <div id="functionBox">
        <button id="closeButton">x</button>
        <h3>Function</h3>
        <p id="functionDescription">Click on a brain part to see its function.</p>
    </div>

    <div id="overlayContainer" style="position: absolute; top: 0; left: 0; width: 700px; height: 500px; pointer-events: none;"></div>

    <script>
        // SPARQL query to fetch brain parts data
        const SPARQL_QUERY = `
            SELECT ?BrainPart ?BrainPartLabel ?BrainPartDescription
            WHERE {
                VALUES ?BrainPart {
                    wd:Q815334  # Parietal lobe
                    wd:Q744385  # Temporal lobe
                    wd:Q848340  # Occipital lobe
                    wd:Q749520  # Frontal lobe
                    wd:Q338924  # Amygdala
                    wd:Q130983  # Cerebellum
                    wd:Q11345481  # Limbic lobe
                    wd:Q184215  # Thalamus
                    wd:Q164386  # Hypothalamus
                    wd:Q192570  # Pons
                    wd:Q48360   # Hippocampus
                    wd:Q728285  # Broca's area
                    wd:Q156871  # Pituitary gland
                }

                ?BrainPart schema:description ?BrainPartDescription.
                FILTER (LANG(?BrainPartDescription) = "en")

                SERVICE wikibase:label { 
                    bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".
                }
            }`;

        // SPARQL endpoint for Wikidata
        const SPARQL_ENDPOINT = "https://query.wikidata.org/sparql";

        // Map of IDs to image paths
        const imageMap = {
            'Q749520': 'images/Frontal lobe.svg',
            'Q848340': 'images/Occipital lobe.svg',
            'Q815334': 'images/Parietal lobe final.svg',
            'Q744385': 'images/Temporal Lobe.svg',
            'Q728285': 'images/Brocas area.svg',
            'Q11345481': 'images/Limbic lobe.svg',
            'Q338924': 'images/Amygdala.svg',
            'Q48360': 'images/Hippocampus.svg',
            'Q184215': 'images/thalamus.svg',
            'Q164386': 'images/hypothalamus.svg',
            'Q156871': 'images/pituitary gland.svg',
            'Q189033': 'images/medulla oblangata.svg',
            'Q185080': 'images/midbrain(mesencephalon).svg',
            'Q192570': 'images/Pons (1).svg',
            'Q130983': 'images/Cerebellum.svg',
        };

        async function fetchData() {
            const url = `${SPARQL_ENDPOINT}?query=${encodeURIComponent(SPARQL_QUERY)}&format=json`;

            try {
                const response = await fetch(url);
                const data = await response.json();
                return data.results.bindings;
            } catch (error) {
                console.error("Error fetching SPARQL data:", error);
                return [];
            }
        }

        async function populateButtons() {
            const styleBox = document.getElementById('styleBox');
            const brainParts = await fetchData();

            brainParts.forEach((part) => {
                const id = part.BrainPart.value.split('/').pop();
                const label = part.BrainPartLabel.value;
                const description = part.BrainPartDescription.value;

                const button = document.createElement('button');
                button.textContent = label;

                button.addEventListener('click', () => {
                    const functionBox = document.getElementById('functionBox');
                    const functionDescription = document.getElementById('functionDescription');

                    functionDescription.textContent = `${label}: ${description}`;

                    const brainImage = document.getElementById('brainImage');
                    brainImage.src = imageMap[id] || 'images/file brain 2024-11-15 at 11.13.10.svg';

                    functionBox.style.display = 'block';
                });

                styleBox.appendChild(button);
            });
        }

        document.getElementById('closeButton').addEventListener('click', () => {
            document.getElementById('functionBox').style.display = 'none';
            document.getElementById('brainImage').src = 'images/file brain 2024-11-15 at 11.13.10.svg';
        });

        populateButtons();
    </script>

    <footer id="footerBar">
        <p>
            Â© <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0 License</a>.
            Images used on this site are sourced from <a href="https://stock.adobe.com/nl/images/human-brain-vector-illustration-top-view-side-view-and-sagittal-section/486058325?prev_url=detail" target="_blank">Adobe Stock</a>.
        </p>
    </footer>
</body>
</html>
